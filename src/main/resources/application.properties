spring.application.name=badminton-marketplace

# ===== UTF-8 ENCODING CONFIGURATION =====
# Mandatory encoding for all files
spring.mandatory-file-encoding=UTF-8
# HTTP Response encoding
server.servlet.encoding.charset=UTF-8
server.servlet.encoding.enabled=true
server.servlet.encoding.force=true

# Server Configuration
server.port=8080
server.servlet.context-path=/

# SSL Configuration for HTTPS (required for ngrok)
server.ssl.enabled=false
server.ssl.key-store-type=PKCS12
server.ssl.key-store-password=password
server.ssl.key-store=classpath:keystore.p12
server.ssl.key-alias=tomcat

# Database Configuration
# Nếu SQL Server Express, thử cả 2 cách:
# Cách 1: Dùng port 1433 (Default instance hoặc đã config port)
#spring.datasource.url=jdbc:sqlserver://localhost:1433;databaseName=BadmintonMarketplace;encrypt=false;trustServerCertificate=true;characterEncoding=UTF-8;useUnicode=true
# Cách 2: Dùng named instance (uncomment nếu cách 1 không work)
 spring.datasource.url=jdbc:sqlserver://localhost\\SQLEXPRESS;databaseName=BadmintonMarketplace;encrypt=false;trustServerCertificate=true;characterEncoding=UTF-8;useUnicode=true
spring.datasource.username=sa
spring.datasource.password=486905
spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver

# JPA Configuration
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.SQLServerDialect
# UTF-8 encoding for JPA/Hibernate
spring.jpa.properties.hibernate.connection.characterEncoding=utf-8
spring.jpa.properties.hibernate.connection.CharSet=utf-8
spring.jpa.properties.hibernate.connection.useUnicode=true

# Data Initialization - Chỉ load data sau khi schema được tạo
spring.sql.init.mode=never
# spring.sql.init.data-locations=classpath:data.sql,classpath:data_extended.sql
# spring.jpa.defer-datasource-initialization=true

# JWT Configuration
jwt.secret=badmintonMarketplaceSecretKey2024ForJWTTokenGenerationWithSecurity
jwt.expiration=86400000

# Cloudinary Configuration
cloudinary.cloud-name=duzkugddg
cloudinary.api-key=318697823826668
cloudinary.api-secret=7ESbMuV-DENDpSf2QaHLpel9Ndw

# File Upload
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# Thymeleaf Configuration
spring.thymeleaf.prefix=classpath:/templates/
spring.thymeleaf.suffix=.html
spring.thymeleaf.mode=HTML
spring.thymeleaf.encoding=UTF-8
spring.thymeleaf.servlet.content-type=text/html
spring.thymeleaf.cache=false

# Debugging
logging.level.org.springframework.security=DEBUG
logging.level.org.springframework.web=DEBUG
server.error.include-message=always

# Session tracking: force cookie-only (disable URL rewriting which adds ;jsessionid=...)
server.servlet.session.tracking-modes=COOKIE
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.same-site=none
server.servlet.session.cookie.secure=true
server.servlet.session.cookie.domain=

# Mail (SMTP) - provided by user
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=nguyendangtuong2005@gmail.com
spring.mail.password=qdsu gnbu hzcx xhwb
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.default-encoding=UTF-8
# Disable test connection on startup to avoid application failing when SMTP host is not reachable
# Set to true only when you have valid SMTP host/credentials reachable from this machine
spring.mail.test-connection=false

# VNPay Configuration (Sandbox - for testing)
# Get these values from https://sandbox.vnpayment.vn/merchantregister/
vnpay.url=https://sandbox.vnpayment.vn/paymentv2/vpcpay.html
vnpay.return-url=https://unsuperiorly-nondiffuse-marylyn.ngrok-free.dev/payment/vnpay-return
vnpay.tmn-code=VXNYMD18
vnpay.hash-secret=53SLXYSDEMKTVW60XJJ3C6S9UYAQDTEW
vnpay.version=2.1.0
vnpay.command=pay
vnpay.order-type=other
