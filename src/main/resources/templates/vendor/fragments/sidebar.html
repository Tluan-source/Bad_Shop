<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6">
<body>
    <!-- Vendor Sidebar Fragment -->
    <div th:fragment="sidebar(active)" class="col-md-2 bg-light sidebar">
        <div class="position-sticky pt-3">
            <h5 class="text-center mb-3">
                <i class="fas fa-store"></i> Quản lý cửa hàng
            </h5>
            
            <ul class="nav flex-column">
                <!-- Dashboard -->
                <li class="nav-item">
                    <a class="nav-link" th:classappend="${active == 'dashboard' ? 'active' : ''}" 
                       th:href="@{/vendor/dashboard}">
                        <i class="fas fa-tachometer-alt"></i> Tổng quan
                    </a>
                </li>
                
                <!-- Store Management Section -->
                <li class="nav-item mt-3">
                    <h6 class="text-muted px-3 mb-2"><small>QUẢN LÝ SHOP</small></h6>
                </li>
                <!-- Chỉ hiển thị "Đăng ký Shop" cho user chưa có role VENDOR -->
                <li class="nav-item" sec:authorize="!hasRole('VENDOR')">
                    <a class="nav-link" th:classappend="${active == 'register' ? 'active' : ''}" 
                       th:href="@{/vendor/register}">
                        <i class="fas fa-store-alt"></i> Đăng ký Shop
                    </a>
                </li>
                <!-- Menu quản lý shop chỉ cho VENDOR -->
                <li class="nav-item" sec:authorize="hasAnyRole('VENDOR', 'ADMIN')">
                    <a class="nav-link" th:classappend="${active == 'store' ? 'active' : ''}" 
                       th:href="@{/vendor/store}">
                        <i class="fas fa-cog"></i> Thông tin Shop
                    </a>
                </li>
                
                <!-- Product Management Section -->
                <li class="nav-item mt-3" sec:authorize="hasAnyRole('VENDOR', 'ADMIN')">
                    <h6 class="text-muted px-3 mb-2"><small>SẢN PHẨM</small></h6>
                </li>
                <li class="nav-item" sec:authorize="hasAnyRole('VENDOR', 'ADMIN')">
                    <a class="nav-link" th:classappend="${active == 'products' ? 'active' : ''}" 
                       th:href="@{/vendor/products}">
                        <i class="fas fa-box"></i> Danh sách sản phẩm
                    </a>
                </li>
                <!-- Category & Attributes management for vendors -->
                <li class="nav-item" sec:authorize="hasAnyRole('VENDOR', 'ADMIN')">
                    <a class="nav-link" th:classappend="${active == 'categories' ? 'active' : ''}"
                       th:href="@{/vendor/categories}">
                        <i class="fas fa-list-alt"></i> Quản lý Danh mục & Thuộc tính
                    </a>
                </li>
                
                <!-- Order Management Section -->
                <li class="nav-item mt-3" sec:authorize="hasAnyRole('VENDOR', 'ADMIN')">
                    <h6 class="text-muted px-3 mb-2"><small>QUẢN LÝ ĐƠN HÀNG</small></h6>
                </li>
                <li class="nav-item" sec:authorize="hasAnyRole('VENDOR', 'ADMIN')">
                    <a class="nav-link" th:classappend="${active == 'orders' ? 'active' : ''}" 
                       th:href="@{/vendor/orders}">
                        <i class="fas fa-shopping-cart"></i> Tất cả đơn hàng
                    </a>
                </li>
                
                <!-- Promotion Management Section -->
                <li class="nav-item mt-3" sec:authorize="hasAnyRole('VENDOR', 'ADMIN')">
                    <h6 class="text-muted px-3 mb-2"><small>KHUYẾN MÃI</small></h6>
                </li>
                <li class="nav-item" sec:authorize="hasAnyRole('VENDOR', 'ADMIN')">
                    <a class="nav-link" th:classappend="${active == 'promotions' ? 'active' : ''}" 
                       th:href="@{/vendor/promotions}">
                        <i class="fas fa-tags"></i> Chương trình khuyến mãi
                    </a>
                </li>
                
                <!-- Finance & Reports Section -->
                <li class="nav-item mt-3" sec:authorize="hasAnyRole('VENDOR', 'ADMIN')">
                    <h6 class="text-muted px-3 mb-2"><small>TÀI CHÍNH & BÁO CÁO</small></h6>
                </li>
                <li class="nav-item" sec:authorize="hasAnyRole('VENDOR', 'ADMIN')">
                    <a class="nav-link" th:classappend="${active == 'analytics' ? 'active' : ''}" 
                       th:href="@{/vendor/analytics}">
                        <i class="fas fa-chart-line"></i> Thống kê doanh thu
                    </a>
                </li>
                <li class="nav-item" sec:authorize="hasAnyRole('VENDOR', 'ADMIN')">
                    <a class="nav-link" th:classappend="${active == 'revenue' ? 'active' : ''}" 
                       th:href="@{/vendor/revenue}">
                        <i class="fas fa-money-bill-wave"></i> Quản lý doanh thu
                    </a>
                </li>
                <li class="nav-item" sec:authorize="hasAnyRole('VENDOR', 'ADMIN')">
                    <a class="nav-link" th:classappend="${active == 'wallet' ? 'active' : ''}" 
                       th:href="@{/vendor/wallet}">
                        <i class="fas fa-wallet"></i> Ví điện tử
                    </a>
                </li>
            </ul>
        </div>
    </div>
</body>
</html>