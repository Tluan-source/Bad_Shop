<!DOCTYPE html>
<html
     xmlns:th="http://www.thymeleaf.org"
     xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6"
>
     <head th:replace="~{fragments/header-register-vendor :: header-register-vendor}">
          <title>Đăng ký làm Người bán - Badminton Marketplace</title>
     </head>
     <body class="vendor-register-page">
          <div th:replace="~{fragments/header :: header}"></div>

          <!-- Hero Section -->
          <div class="vendor-hero">
               <div class="container">
                    <div class="row align-items-center">
                         <div class="col-lg-6">
                              <div class="hero-content">
                                   <span class="hero-badge">
                                        <i class="fas fa-star me-2"></i>Bắt đầu kinh doanh ngay hôm
                                        nay
                                   </span>
                                   <h1 class="hero-title">Trở thành Người bán</h1>
                                   <p class="hero-subtitle">
                                        Mở rộng kinh doanh cùng hàng triệu khách hàng trên Badminton
                                        Marketplace
                                   </p>
                                   <div class="hero-stats">
                                        <div class="stat-item">
                                             <i class="fas fa-users"></i>
                                             <div>
                                                  <strong>10,000+</strong>
                                                  <span>Người bán</span>
                                             </div>
                                        </div>
                                        <div class="stat-item">
                                             <i class="fas fa-box"></i>
                                             <div>
                                                  <strong>50,000+</strong>
                                                  <span>Sản phẩm</span>
                                             </div>
                                        </div>
                                        <div class="stat-item">
                                             <i class="fas fa-chart-line"></i>
                                             <div>
                                                  <strong>98%</strong>
                                                  <span>Hài lòng</span>
                                             </div>
                                        </div>
                                   </div>
                              </div>
                         </div>
                         <div class="col-lg-6">
                              <div class="hero-illustration">
                                   <i class="fas fa-store-alt"></i>
                              </div>
                         </div>
                    </div>
               </div>
          </div>

          <div class="container py-5">
               <div class="row justify-content-center">
                    <div class="col-lg-10">
                         <!-- Pending Registration Alert -->
                         <div th:if="${hasPending}" class="pending-alert-modern mb-4">
                              <div class="pending-icon">
                                   <i class="fas fa-clock"></i>
                              </div>
                              <div class="pending-content">
                                   <h4>Yêu cầu đang chờ phê duyệt</h4>
                                   <p th:text="${message}"></p>
                                   <div class="pending-info">
                                        <div class="info-item">
                                             <i class="fas fa-check-circle"></i>
                                             <span>Yêu cầu đã được gửi</span>
                                        </div>
                                        <div class="info-item">
                                             <i class="fas fa-hourglass-half"></i>
                                             <span>Đang chờ admin xem xét</span>
                                        </div>
                                        <div class="info-item">
                                             <i class="fas fa-envelope"></i>
                                             <span>Thông báo qua email khi được duyệt</span>
                                        </div>
                                   </div>
                                   <a th:href="@{/user/profile}" class="btn btn-modern-primary">
                                        <i class="fas fa-user me-2"></i>Quay lại trang cá nhân
                                   </a>
                              </div>
                         </div>

                         <!-- Registration Form - Always show -->
                         <div class="registration-container">
                              <!-- Success/Error Messages -->
                              <div th:if="${success}" class="modern-alert success">
                                   <i class="fas fa-check-circle"></i>
                                   <span th:text="${success}"></span>
                                   <button type="button" class="close-btn" data-bs-dismiss="alert">
                                        <i class="fas fa-times"></i>
                                   </button>
                              </div>
                              <div th:if="${error}" class="modern-alert error">
                                   <i class="fas fa-exclamation-circle"></i>
                                   <span th:text="${error}"></span>
                                   <button type="button" class="close-btn" data-bs-dismiss="alert">
                                        <i class="fas fa-times"></i>
                                   </button>
                              </div>

                              <!-- Benefits Cards -->
                              <div class="benefits-grid">
                                   <div class="benefit-card">
                                        <div class="benefit-icon blue">
                                             <i class="fas fa-users"></i>
                                        </div>
                                        <h4>Tiếp cận rộng</h4>
                                        <p>Hàng triệu khách hàng tiềm năng</p>
                                   </div>
                                   <div class="benefit-card">
                                        <div class="benefit-icon green">
                                             <i class="fas fa-tools"></i>
                                        </div>
                                        <h4>Quản lý dễ dàng</h4>
                                        <p>Công cụ chuyên nghiệp</p>
                                   </div>
                                   <div class="benefit-card">
                                        <div class="benefit-icon purple">
                                             <i class="fas fa-bullhorn"></i>
                                        </div>
                                        <h4>Marketing miễn phí</h4>
                                        <p>Hỗ trợ khuyến mãi đa dạng</p>
                                   </div>
                                   <div class="benefit-card">
                                        <div class="benefit-icon orange">
                                             <i class="fas fa-wallet"></i>
                                        </div>
                                        <h4>Thanh toán nhanh</h4>
                                        <p>Minh bạch, an toàn</p>
                                   </div>
                              </div>

                              <!-- Registration Steps -->
                              <div class="registration-card">
                                   <div class="card-header-modern">
                                        <div class="header-left">
                                             <i class="fas fa-store-alt"></i>
                                             <div>
                                                  <h3>Đăng ký làm Người bán</h3>
                                                  <p>Hoàn thành thông tin để bắt đầu</p>
                                             </div>
                                        </div>
                                        <div class="header-badge">
                                             <i class="fas fa-shield-alt me-2"></i>Miễn phí
                                        </div>
                                   </div>

                                   <div class="card-body-modern">
                                        <!-- Important Note -->
                                        <div class="info-banner">
                                             <i class="fas fa-info-circle"></i>
                                             <div>
                                                  <strong>Lưu ý:</strong> Sau khi đăng ký, yêu cầu
                                                  của bạn sẽ được admin xem xét trong vòng 24-48
                                                  giờ. Bạn sẽ nhận thông báo qua email khi được phê
                                                  duyệt.
                                             </div>
                                        </div>

                                        <form
                                             th:action="@{/vendor/register}"
                                             method="post"
                                             th:object="${storeRegistration}"
                                             enctype="multipart/form-data"
                                             class="modern-form"
                                        >
                                             <!-- Section 1: Store Info -->
                                             <div class="form-section">
                                                  <div class="section-header">
                                                       <span class="section-number">1</span>
                                                       <div>
                                                            <h5>Thông tin Cửa hàng</h5>
                                                            <p>
                                                                 Cung cấp thông tin cơ bản về cửa
                                                                 hàng của bạn
                                                            </p>
                                                       </div>
                                                  </div>

                                                  <div class="form-group-modern">
                                                       <label for="storeName">
                                                            <i class="fas fa-store me-2"></i>Tên cửa
                                                            hàng
                                                            <span class="required">*</span>
                                                       </label>
                                                       <input
                                                            type="text"
                                                            class="form-control-modern"
                                                            id="storeName"
                                                            th:field="*{storeName}"
                                                            placeholder="VD: Cửa hàng Cầu lông ABC"
                                                            required
                                                       />
                                                       <small class="form-hint">
                                                            <i class="fas fa-info-circle me-1"></i
                                                            >Tên này sẽ hiển thị công khai trên
                                                            marketplace
                                                       </small>
                                                  </div>

                                                  <div class="form-group-modern">
                                                       <label for="description">
                                                            <i class="fas fa-align-left me-2"></i>Mô
                                                            tả cửa hàng
                                                            <span class="required">*</span>
                                                       </label>
                                                       <textarea
                                                            class="form-control-modern"
                                                            id="description"
                                                            rows="4"
                                                            th:field="*{description}"
                                                            placeholder="Giới thiệu về cửa hàng, sản phẩm kinh doanh, điểm mạnh của bạn..."
                                                            required
                                                       ></textarea>
                                                       <small class="form-hint">
                                                            <i class="fas fa-pencil-alt me-1"></i
                                                            >Viết mô tả chi tiết để thu hút khách
                                                            hàng
                                                       </small>
                                                  </div>

                                                  <div class="row">
                                                       <div class="col-md-6">
                                                            <div class="form-group-modern">
                                                                 <label for="phone">
                                                                      <i
                                                                           class="fas fa-phone me-2"
                                                                      ></i
                                                                      >Số điện thoại
                                                                      <span class="required"
                                                                           >*</span
                                                                      >
                                                                 </label>
                                                                 <input
                                                                      type="tel"
                                                                      class="form-control-modern"
                                                                      id="phone"
                                                                      th:field="*{phone}"
                                                                      placeholder="0123456789"
                                                                      pattern="[0-9]{10,11}"
                                                                      required
                                                                 />
                                                            </div>
                                                       </div>
                                                       <div class="col-md-6">
                                                            <div class="form-group-modern">
                                                                 <label for="email">
                                                                      <i
                                                                           class="fas fa-envelope me-2"
                                                                      ></i
                                                                      >Email liên hệ
                                                                      <span class="required"
                                                                           >*</span
                                                                      >
                                                                 </label>
                                                                 <input
                                                                      type="email"
                                                                      class="form-control-modern"
                                                                      id="email"
                                                                      th:field="*{email}"
                                                                      placeholder="shop@example.com"
                                                                      required
                                                                 />
                                                            </div>
                                                       </div>
                                                  </div>
                                             </div>

                                             <!-- Section 2: Location -->
                                             <div class="form-section">
                                                  <div class="section-header">
                                                       <span class="section-number">2</span>
                                                       <div>
                                                            <h5>Địa chỉ cửa hàng</h5>
                                                            <p>
                                                                 Xác định vị trí chính xác của cửa
                                                                 hàng
                                                            </p>
                                                       </div>
                                                  </div>

                                                  <!-- Address Search -->
                                                  <div
                                                       class="form-group-modern address-search-container"
                                                  >
                                                       <label for="addressSearch">
                                                            <i class="fas fa-search me-2"></i>Tìm
                                                            kiếm địa chỉ
                                                       </label>
                                                       <div class="search-input-wrapper">
                                                            <input
                                                                 type="text"
                                                                 id="addressSearch"
                                                                 class="form-control-modern"
                                                                 placeholder="Nhập địa chỉ, tên đường, quận... để tìm kiếm"
                                                                 autocomplete="off"
                                                            />
                                                            <i
                                                                 class="fas fa-location-arrow search-icon"
                                                            ></i>
                                                       </div>
                                                       <div
                                                            id="addressSuggestions"
                                                            style="display: none"
                                                       ></div>
                                                       <small class="form-hint">
                                                            <i class="fas fa-lightbulb me-1"></i
                                                            >Nhập ít nhất 3 ký tự để tìm kiếm
                                                       </small>
                                                  </div>

                                                  <!-- Current Location Button -->
                                                  <div class="form-group-modern">
                                                       <button
                                                            type="button"
                                                            id="useCurrentLocation"
                                                            class="btn-current-location"
                                                       >
                                                            <i class="fas fa-crosshairs me-2"></i>
                                                            <span
                                                                 >Sử dụng vị trí hiện tại của
                                                                 tôi</span
                                                            >
                                                            <i
                                                                 class="fas fa-spinner fa-spin ms-2 d-none"
                                                                 id="locationSpinner"
                                                            ></i>
                                                       </button>
                                                  </div>

                                                  <!-- Map -->
                                                  <div class="map-wrapper">
                                                       <label class="map-label">
                                                            <i
                                                                 class="fas fa-map-marked-alt me-2"
                                                            ></i
                                                            >Chọn vị trí trên bản đồ
                                                            <span class="required">*</span>
                                                       </label>
                                                       <div id="map"></div>
                                                       <div class="map-hint">
                                                            <i class="fas fa-hand-pointer me-2"></i>
                                                            Nhấp vào bản đồ để chọn vị trí chính xác
                                                       </div>
                                                  </div>

                                                  <!-- Selected Address Display -->
                                                  <div class="selected-address-box">
                                                       <label class="selected-label">
                                                            <i class="fas fa-check-circle me-2"></i
                                                            >Địa chỉ đã chọn
                                                       </label>
                                                       <input
                                                            type="text"
                                                            id="fullAddress"
                                                            class="form-control-modern"
                                                            placeholder="Chưa chọn vị trí..."
                                                            readonly
                                                       />
                                                  </div>

                                                  <!-- Detailed Address -->
                                                  <div class="form-group-modern">
                                                       <label for="address">
                                                            <i class="fas fa-home me-2"></i>Địa chỉ
                                                            cụ thể
                                                            <span class="required">*</span>
                                                       </label>
                                                       <input
                                                            type="text"
                                                            class="form-control-modern"
                                                            id="address"
                                                            th:field="*{address}"
                                                            placeholder="VD: Tầng 5, Tòa nhà ABC, 123 Đường XYZ"
                                                            required
                                                       />
                                                       <small class="form-hint">
                                                            <i class="fas fa-edit me-1"></i>Bạn có
                                                            thể chỉnh sửa để thêm chi tiết
                                                       </small>
                                                  </div>

                                                  <!-- Hidden fields for city, district, ward -->
                                                  <input
                                                       type="hidden"
                                                       id="city"
                                                       th:field="*{city}"
                                                  />
                                                  <input
                                                       type="hidden"
                                                       id="district"
                                                       th:field="*{district}"
                                                  />
                                                  <input
                                                       type="hidden"
                                                       id="ward"
                                                       th:field="*{ward}"
                                                  />
                                                  <input
                                                       type="hidden"
                                                       id="latitude"
                                                       th:field="*{latitude}"
                                                  />
                                                  <input
                                                       type="hidden"
                                                       id="longitude"
                                                       th:field="*{longitude}"
                                                  />
                                             </div>

                                             <!-- Section 3: Logo & Terms -->
                                             <div class="form-section">
                                                  <div class="section-header">
                                                       <span class="section-number">3</span>
                                                       <div>
                                                            <h5>Logo & Xác nhận</h5>
                                                            <p>Tải logo và đồng ý với điều khoản</p>
                                                       </div>
                                                  </div>

                                                  <div class="form-group-modern">
                                                       <label for="logo">
                                                            <i class="fas fa-image me-2"></i>Logo
                                                            cửa hàng
                                                            <span class="optional-badge"
                                                                 >Tùy chọn</span
                                                            >
                                                       </label>
                                                       <div class="file-upload-wrapper">
                                                            <input
                                                                 type="file"
                                                                 class="file-input-modern"
                                                                 id="logo"
                                                                 name="logoFile"
                                                                 accept="image/*"
                                                            />
                                                            <label for="logo" class="file-label">
                                                                 <i
                                                                      class="fas fa-cloud-upload-alt me-2"
                                                                 ></i>
                                                                 <span id="file-label-text"
                                                                      >Chọn ảnh</span
                                                                 >
                                                            </label>
                                                       </div>
                                                       <div
                                                            id="logo-preview"
                                                            class="logo-preview"
                                                            style="display: none"
                                                       >
                                                            <img
                                                                 id="preview-image"
                                                                 src=""
                                                                 alt="Logo preview"
                                                            />
                                                            <button
                                                                 type="button"
                                                                 class="btn-remove-image"
                                                                 id="remove-logo"
                                                            >
                                                                 <i class="fas fa-times"></i>
                                                            </button>
                                                       </div>
                                                       <small class="form-hint">
                                                            <i class="fas fa-info-circle me-1"></i
                                                            >JPG, PNG. Tối đa 2MB. Logo giúp tăng uy
                                                            tín cho cửa hàng
                                                       </small>
                                                  </div>

                                                  <div class="terms-box">
                                                       <div class="custom-checkbox">
                                                            <input
                                                                 type="checkbox"
                                                                 id="agreeTerms"
                                                                 required
                                                            />
                                                            <label for="agreeTerms">
                                                                 <div>
                                                                      Tôi đã đọc và đồng ý với
                                                                      <a href="#" target="_blank"
                                                                           >Điều khoản dịch vụ</a
                                                                      >
                                                                      và
                                                                      <a href="#" target="_blank"
                                                                           >Chính sách bán hàng</a
                                                                      >
                                                                      của Badminton Marketplace
                                                                      <span class="required"
                                                                           >*</span
                                                                      >
                                                                 </div>
                                                            </label>
                                                       </div>
                                                  </div>
                                             </div>

                                             <!-- Submit Actions -->
                                             <div class="form-actions">
                                                  <button type="submit" class="btn-submit-modern">
                                                       <i class="fas fa-check-circle me-2"></i>
                                                       Đăng ký ngay
                                                       <i class="fas fa-arrow-right ms-2"></i>
                                                  </button>
                                                  <a th:href="@{/}" class="btn-cancel-modern">
                                                       <i class="fas fa-times me-2"></i>Hủy bỏ
                                                  </a>
                                             </div>
                                        </form>
                                   </div>
                              </div>
                         </div>

                         <!-- Help Section -->
                         <div class="help-section">
                              <div class="help-icon">
                                   <i class="fas fa-question-circle"></i>
                              </div>
                              <div class="help-content">
                                   <h5>Cần hỗ trợ?</h5>
                                   <p>Đội ngũ hỗ trợ của chúng tôi luôn sẵn sàng giúp bạn</p>
                                   <div class="contact-methods">
                                        <a href="tel:1900xxxx" class="contact-item">
                                             <i class="fas fa-phone-alt"></i>
                                             <span>1900-xxxx</span>
                                        </a>
                                        <a
                                             href="mailto:support@badmintonmarket.com"
                                             class="contact-item"
                                        >
                                             <i class="fas fa-envelope"></i>
                                             <span>support@badmintonmarket.com</span>
                                        </a>
                                        <a href="#" class="contact-item">
                                             <i class="fab fa-facebook-messenger"></i>
                                             <span>Live Chat</span>
                                        </a>
                                   </div>
                              </div>
                         </div>
                    </div>
               </div>
          </div>

          <div th:replace="~{fragments/footer-vendor :: footer-vendor}"></div>

          <!-- Leaflet JS - Load sau khi DOM ready -->
          <script src="/js/vendor-register.js"></script>
     </body>
</html>
