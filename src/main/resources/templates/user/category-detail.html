<!DOCTYPE html>
<html
     xmlns:th="http://www.thymeleaf.org"
     xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
>
     <head th:replace="~{fragments/head :: head}">
          <title>Chi tiết danh mục - Badminton Marketplace</title>
          <link rel="stylesheet" href="/css/style.css" />
     </head>
     <body>
          <th:block th:replace="~{fragments/header :: header}"></th:block>

          <section class="py-5 bg-light">
               <div class="container">
                    <div class="card mb-4">
                         <div class="card-body">
                              <div class="text-center">
                                   <i class="fas fa-tags fa-3x text-primary mb-3"></i>
                                   <h2 class="mb-2" th:text="${category.name}"></h2>
                                   <p class="text-muted" th:text="${category.description}"></p>
                              </div>
                         </div>
                    </div>
               </div>
          </section>

          <section class="py-5">
               <div class="container">
                    <h3 class="mb-4">Sản phẩm trong danh mục</h3>
                    <div class="row">
                         <div th:if="${#lists.isEmpty(products)}" class="col-12">
                              <div class="alert alert-info">
                                   <i class="fas fa-info-circle me-2"></i>Danh mục chưa có sản phẩm
                                   nào.
                              </div>
                         </div>

                         <div th:each="product : ${products}" class="col-md-3 mb-4">
                              <div class="card h-100">
                                   <img
                                        th:src="${product.firstImage}"
                                        class="card-img-top"
                                        alt="Product Image"
                                        style="height: 200px; object-fit: cover"
                                   />
                                   <div class="card-body">
                                        <h5 class="card-title" th:text="${product.name}"></h5>
                                        <p class="card-text">
                                             <span class="text-danger fw-bold"
                                                  th:text="${#numbers.formatDecimal(product.promotionalPrice ?: product.price, 0, 'POINT', 0, 'COMMA')} + ' đ'">
                                             </span>
                                             <div class="product-rating mb-2">
                                                  <span th:each="i : ${#numbers.sequence(1,5)}">
                                                      <i th:classappend="${i <= product.rating ? 'fas fa-star text-warning' : 
                                                                         (i - product.rating <= 0.5 ? 'fas fa-star-half-alt text-warning' : 
                                                                         'far fa-star text-warning')}"></i>
                                                  </span>
                                                  <span class="text-muted ms-2">(<span th:text="${product.rating}"></span>)</span>
                                              </div>
                                             <span th:if="${product.promotionalPrice}"
                                                  class="text-muted text-decoration-line-through ms-2"
                                                  th:text="${#numbers.formatDecimal(product.price, 0, 'POINT', 0, 'COMMA')} + ' đ'">
                                             </span>

                                        </p>
                                        <div class="mb-2">
                                             <small class="text-muted">
                                                  <i class="fas fa-store me-1"></i>
                                                  <span th:text="${product.store.name}"></span>
                                             </small>
                                        </div>
                                        <a
                                             th:href="@{/products/{id}(id=${product.id})}"
                                             class="btn btn-outline-primary w-100"
                                             >Xem chi tiết</a
                                        >
                                   </div>
                              </div>
                         </div>
                    </div>
               </div>
          </section>

          <th:block th:replace="~{fragments/footer-user :: footer-user}"></th:block>
     </body>
</html>
