### 🧾 Tổng quan

Hoàn thiện toàn bộ quy trình đặt hàng & đánh giá sản phẩm, bao gồm:

-    Sửa lỗi giỏ hàng, tính giá, xử lý styleValueIds
-    Cải thiện trang checkout với bản đồ chọn địa chỉ (OpenStreetMap)
-    Thêm tính năng review sản phẩm chỉ cho phép 1 lần đánh giá

### 🛒 Giỏ hàng (Cart)

-    Fix lỗi `getStyleValueIds()` undefined trong CartItem
-    Cập nhật `CartItem` thêm `styleValueIds` để lưu JSON các lựa chọn biến thể
-    Bổ sung `AddToCartRequest.styleValueIds` để đồng bộ style từ frontend
-    Cập nhật `CartService` xử lý styleValueIds khi thêm vào giỏ
-    Chuẩn hóa tính tổng tiền sản phẩm trong giỏ hàng

### 💳 Checkout

-    Cập nhật `CheckoutController` xử lý `CheckoutItemDTO.styleValueIds`
-    Bổ sung `parseStyleIds()` để convert JSON style sang danh sách
-    Giao diện `checkout.html`:
     -    Thêm bản đồ OpenStreetMap chọn vị trí giao hàng
     -    Tự động điền địa chỉ từ tọa độ
     -    Thêm lựa chọn thanh toán COD / VNPay
     -    Cải thiện UX và validation form

### 📍 Bản đồ giao hàng (OSM)

-    Tích hợp thư viện Leaflet + API Nominatim
-    Cho phép click để lấy địa chỉ chi tiết, hiển thị tự động trong form
-    Ghi nhận `latitude` và `longitude` vào form gửi server

### 🌟 Đánh giá sản phẩm (Review)

-    Tạo entity `Review` và `ReviewImage`, liên kết `User`, `Product`, `OrderItem`
-    Tạo `ReviewController` xử lý form đánh giá + upload ảnh Cloudinary
-    Cập nhật `review.html`:
     -    Fix lỗi chọn sao hiển thị
     -    Thêm xem trước ảnh upload (preview)
     -    Khi đã đánh giá → hiển thị “Bạn đã đánh giá sản phẩm này” và ẩn form
-    Cập nhật `OrderItem` thêm field `@Transient boolean reviewed`
-    Cập nhật `ReviewRepository` thêm `existsByOrderItemIdAndUserId()`
-    Cập nhật `ReviewController` gán `item.setReviewed()` cho mỗi item

### ⚙️ Khác

-    Đồng bộ rating trung bình cho sản phẩm & cửa hàng sau khi gửi review
-    Cải thiện giao diện, thông báo và kiểm tra xác thực user
-    Code tuân thủ clean code và đảm bảo an toàn transaction

> Hoàn thiện toàn bộ hành trình đặt hàng → thanh toán → đánh giá,
> mang lại trải nghiệm người dùng mượt mà và trực quan hơn.
